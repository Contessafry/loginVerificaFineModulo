(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();function c(e){const t=document.getElementById("root");t?t.innerHTML=e:console.error("App not found")}function d(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${t}/${s} ${r}:${o}`}let i=!0;function g(){return i=!i,console.log(i),document.getElementById("root").style.backgroundColor=i?"#ffff":"#242424",document.body.style.backgroundColor=i?"#ffffff":"#242424",i}class m{constructor(){this.loggedUser=localStorage.getItem("loggedUser")||"",this.users=JSON.parse(localStorage.getItem("users")||"[]")}toggleSaveLoggedUser(){localStorage.setItem("loggedUser",this.loggedUser?this.loggedUser:"")}saveUsers(){localStorage.setItem("users",JSON.stringify(this.users||[]))}logIn(t){console.log(t),this.loggedUser=t;const s=this.users.find(r=>r.name===t);if(s)s.totalAccess=s.totalAccess+1,s.latestAccess=d();else{const r={name:t,latestAccess:d(),totalAccess:1};this.users=[...this.users,r]}this.saveUsers(),this.toggleSaveLoggedUser()}logOut(){this.loggedUser="",this.toggleSaveLoggedUser()}getUsers(){const t=localStorage.getItem("users");t&&(this.users=JSON.parse(t))}}function h(){const e=document.getElementById("themeBtn");e==null||e.addEventListener("click",()=>{const t=g();e.innerHTML=t?"🌕":"☀",e.style.backgroundColor=t?"#535bf2":"#11161b",document.querySelectorAll(".userCard").forEach(s=>s.style.backgroundColor=t?"#ff8b24":"#11161b")})}function p(){const e=document.getElementById("logOutBtn");h(),e&&e.addEventListener("click",()=>{l.logOut();const{htmlLogIn:t,logInListener:s}=f();c(t),s()})}function I(){return l.users.map(e=>`<div class="userCard"><div class="userIcon">🙍‍♂️</div>
        <h2>${e.name}</h2><p>ultimo accesso:  ${e.latestAccess}</p><p> accessi totali: ${e.totalAccess}</p></div>`).join("")}function a(){return{htmlUsers:`  <button id=themeBtn>${g()?"🌕":"☀"}</button>
  <div id= "usersBox">

  <button id="logOutBtn">LogOut</button>
  <div id="usersContainer">
  ${I()}</div>
  </div>`,logOutListener:()=>{p()}}}function L(){const e=document.getElementById("themeBtn");e==null||e.addEventListener("click",()=>{const t=g();e.innerHTML=t?"🌕":"☀",e.style.backgroundColor=t?"#535bf2":"#11161b",document.getElementById("loginI nput").style.backgroundColor=t?"white":"#11161b"})}function y(){const e=document.getElementById("loginBtn");L(),e&&e.addEventListener("click",()=>{const t=document.getElementById("loginInput");if(t.value.length!==0){l.logIn(t.value);const{htmlUsers:s,logOutListener:r}=a();c(s),r()}else alert("Inserisci lo UserName")})}function f(){return{htmlLogIn:`<button id=themeBtn>${g()?"🌕":"☀"}</button>
  <div id="loginBox">
    <input placeholder="...Username" type="text" id="loginInput"/>
    <button id="loginBtn">Login</button>
  </div>`,logInListener:()=>{y()}}}const l=new m;window.onload=()=>{if(l.loggedUser){const{htmlUsers:e,logOutListener:t}=a();c(e),t()}else{const{htmlLogIn:e,logInListener:t}=f();c(e),t()}console.log(!!l.loggedUser)};
